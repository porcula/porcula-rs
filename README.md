# porcula-rs
Локальный поиск по электронной библиотеке

Реализация на Rust

## Цели
  * индексация FB2-книг внутри zip-файлов (например архивы librusec,flibusta)
  * полнотекстовый поиск по названию/автору/аннотации/тексту книги
  * примитивный веб-интерфейс, цель - работа на электронной читалке типа Onyx/PocketBook и ПК
  * просмотр книги в браузере как HTML
  * отсутствие runtime-зависимостей


## Требования
  * ОС поддерживаемая Rust (Linux,Windows,MacOS,...)
  * для большой библиотеки **требуется 64-битная ОС**
  * место под базу - примерно 1/6 от объёма исходных файлов
  * для индексации желательно мощное железо (от 4 ядер, 16 ГБ памяти, SSD)
  * поиск в веб-приложении требует гораздо меньше ресурсов

Проверено на Windows 10 и Ubuntu 18.04

Скорость индексации на Ryzen 1700 + 16GB RAM + NVMe SSD: примерно 70 ГБ в час.

---

## Режимы работы

* индексация всех файлов
```
porcula index full
```

* индексация только новых файлов
```
porcula index delta
```

* веб-сервер
```
porcula
```

* запрос с командной строки, результат в JSON
```
porcula query "искомый текст"
porcula facet /author/K
```

По умолчанию индекс книги ищутся в подкаталоге 'books' относительно текущего, индекс создаётся в подкаталоге 'index'.
Расположение индекса/книг, порт веб-сервера меняются параметрами командной строки.

## Сборка
```
cargo build --release
```
В режиме debug скорость приложения на порядок ниже!
